# 浮游动物一体化（Android）项目书（交接版）

版本：v0.2（2026-02-12 更新）  
主应用：**浮游动物一体化**（`com.plankton.one102`）  
语音助手：**语音识别助手**（`com.voiceassistant`）  
代码仓库：`https://github.com/yuelangmanle/plankton.git`

---

## 1. 项目目标

建设一套以 Android 为核心的浮游动物数据处理系统，覆盖：

- 采样点与物种计数录入
- 密度/生物量/多样性指数自动计算
- 表1/表2 的多工作表 `.xlsx` 导出
- AI 辅助（问答、补齐、核对、图片识别）
- 独立语音助手 App 接入（语音转写与批量指令）

原则：

- 离线优先，本地可完成核心流程
- 结果可追溯、可复核
- 模板驱动导出，保证格式稳定

---

## 2. 当前版本状态

主应用（android）：

- `versionName = 6.1`
- `versionCode = 610`

语音助手（voice_assistant）：

- `versionName = 3.2`
- `versionCode = 32`

---

## 3. 开发进度（截至 2026-02-12）

### 3.1 已完成

- 主 App 基础业务闭环：录入 -> 计算 -> 导出 -> 分享
- 历史数据集管理、备份导入导出、只读快照
- 数据库管理（分类、湿重、别名、AI 缓存）
- AI 能力（双 API 检测、问答、补齐、计算核对、图片识别导入）
- 全局助手浮窗与语音助手联动
- 语音助手引擎支持（Whisper / Sherpa）与多参数控制

### 3.2 本轮已完成的工程治理

- 远程仓库创建并推送到 GitHub
- 清理历史 APK（两个 App 各仅保留最新一版）
- 删除语音助手本地模型目录（避免仓库体积膨胀）
- 表格文件从 Git 跟踪剔除，改为本地保留不上传
- README 重写，补齐仓库结构与使用说明

### 3.3 仍需持续推进

- 继续按版本维护更新日志与文档同步
- 视发布策略决定是否启用 Git LFS / Release 附件分发大文件
- 视业务需要补充自动化测试与导出回归测试

---

## 4. 仓库与交付策略

### 4.1 交付内容（上传 GitHub）

- 源码（`android/`、`app/`、`voice_assistant/`）
- 关键文档（`docs/`）
- 工具脚本（`tools/`）

### 4.2 本地保留、不上传内容

以下内容通过 `.gitignore` 忽略：

- 构建产物与缓存（`build/`、`.gradle/`、`.tmp/`、`.toolchain/` 等）
- 历史 APK 与安装包产物（`apk_history/`、`*.apk`、`*.aab` 等）
- 本地模型目录（`voice_assistant/.../models`、`.../sherpa`）
- 所有表格文件（`*.xlsx`、`*.xls`、`*.csv`、`*.tsv`、`*.xlsm`、`*.ods`）

说明：这些文件保留在本地磁盘，不影响日常开发，但不会进入远程仓库。

---

## 5. 文档维护规则

每次版本迭代至少同步以下文件：

- `android/app/build.gradle.kts`（主 App 版本号）
- `voice_assistant/app/build.gradle.kts`（语音助手版本号）
- `android/app/src/main/java/com/plankton/one102/ui/AppInfo.kt`
- `voice_assistant/app/src/main/java/com/voiceassistant/ui/AppInfo.kt`
- `docs/当前程序情况.md`
- `docs/项目书.md`

若改动到内置项目文档，还需执行：

- `tools/update_docs_and_encrypt.ps1`（同步生成 `.enc` 资源）

---

## 6. 关键目录索引

- `android/`：主 Android 项目
- `voice_assistant/`：语音助手 Android 项目
- `app/`：Web 端工具
- `docs/`：项目书、当前程序情况、语音助手项目书等
- `tools/`：加密与辅助脚本

---

## 7. 风险与建议

- 仓库体积风险：持续避免提交大模型与历史二进制
- 文档同步风险：每次发版必须同步文档与加密资源
- 可追溯风险：AI 相关结果保留来源与回放路径

建议：

- 对安装包与模型采用 Release 附件/对象存储分发
- 后续补充自动化回归（导出结构、公式结果、关键页面）

